import gc
import math
from numpy import *
import numpy.random
from sklearn.datasets import fetch_mldata
import sklearn.preprocessing
import numpy as np
import matplotlib as mpl
#mpl.use('Agg')
import matplotlib.pyplot as plt
from matplotlib import style
style.use("ggplot")
from sklearn import svm
from sklearn import svm
from sklearn.model_selection import GridSearchCV, cross_val_score
from sklearn.model_selection import PredefinedSplit
from sklearn.metrics import accuracy_score
import scipy
from statsmodels.sandbox.stats.multicomp import fdrcorrection0
import time
from matplotlib.ticker import FormatStrFormatter
import math

steps = 200
intervals = 3
logistic_regression = [0.794163285805355, 0.88289776647247142, 0.85611644330875836, 0.89193876081718904, 0.91508204563393336, 0.90714532588507291, 0.91241258966980221, 0.93747326484209292, 0.95179510978098603, 0.94807799724621944, 0.96189326047860069, 0.96276977326748825, 0.96012496630192667, 0.96224345852143522, 0.96119485978327202, 0.96106794852074562, 0.96123605421899661, 0.96141058101702392, 0.96018464317791796, 0.9615460945005273, 0.960323876836779, 0.95833383935872019, 0.95749409134284347, 0.96080550414845867, 0.95761081531190917, 0.95726158129489813, 0.96318827298506626, 0.96426221010354873, 0.96236497037120583, 0.96467446492609044, 0.96411595045792642, 0.96340155524039373, 0.96568091493541686, 0.96441003661561209, 0.96800687971641786, 0.96779965543993818, 0.96752765009486175, 0.96589988156426154, 0.96635189925189879, 0.96494117474911045, 0.96453034015798522, 0.96274710233266969, 0.96259691624517707, 0.96329827778850152, 0.9655326517347731, 0.96415224082567941, 0.96468699272618719, 0.96517166852004732, 0.96355573316721765, 0.96395533714698023, 0.96618025256973061, 0.96661153197543315, 0.96633802537655078, 0.96605008291003913, 0.96579633677745114, 0.96634848471556045, 0.96597118017753714, 0.96591960760097351, 0.96517104487271399, 0.96308855038733743, 0.96299608924291191, 0.96310613878415607, 0.96332137538010776, 0.96399794158550645, 0.96407822590169323, 0.96321777364621985, 0.9636059466954523, 0.96353511211508158, 0.96311547899799466, 0.96450543483122431, 0.964579413699585, 0.96492557676884338, 0.96510177574980516, 0.96571395036849739, 0.96678878060245732, 0.96660961379859456, 0.966434547117761, 0.96875713338740665, 0.96877908842985183, 0.9696841285324268, 0.9700393570652498, 0.96998690495450968, 0.97015481576443852, 0.96975553738550724, 0.96836405424499061, 0.96774170708345353, 0.96788288766616581, 0.96781673621119213, 0.96782531705390618, 0.96778579230270834, 0.96731118632358304, 0.96877272347518117, 0.96840026909770727, 0.96846362891782856, 0.96888746518811275, 0.96854392483668728, 0.96840111421817132, 0.96844884886986216, 0.96853622871497669, 0.96938690864386357, 0.96860511014286277, 0.96861816979807303, 0.96869913314911948, 0.96895664547714022, 0.96883459364951485, 0.96856477040912758, 0.96911721981040577, 0.96934963969354049, 0.96935739889429084, 0.96933362091813069, 0.96936251646768257, 0.96924682382688798, 0.96844928403362618, 0.96867145575743763, 0.96860736116798518, 0.9686423716444027, 0.96867589439488311, 0.9686063503316884, 0.96880657040840334, 0.96896616503965238, 0.96872778040055552, 0.96878602106551814, 0.96894102791890457, 0.9689507701927671, 0.96904221739948126, 0.96915320026263951, 0.96912371824743404, 0.96943559101921495, 0.97273996983591393, 0.97329666689597139, 0.97463625239543039, 0.97427583040157706, 0.973770588874595, 0.97362897638394297, 0.97396749689793727, 0.97445440313203213, 0.97440716988860887, 0.97441402813468392, 0.97390914146041074, 0.97418327466799448, 0.97419363630455391, 0.97357017476638608, 0.97364453348682711, 0.97363738595016014, 0.97327712679359912, 0.97302926682255786, 0.97142545904420652, 0.96937123265499336, 0.96948696760599984, 0.96939039046516062, 0.96932303763881988, 0.96980289815127763, 0.96973308530731084, 0.97130940451823911, 0.97119002769261553, 0.97136113935822144, 0.97119858560825933, 0.97116350979398924, 0.97017710187999628, 0.96993934726171782, 0.96996104488630674, 0.96947342116586233, 0.9695195983139071, 0.969585231683874, 0.9699052519124034, 0.9697964833490802, 0.97009660369541062, 0.9701729988607285, 0.97016279674377282, 0.97025909236759278, 0.96939314490884632, 0.9689291050357689, 0.96919937990110561, 0.96930297926681708, 0.96906531170269727, 0.96923828635936271, 0.96926552634798191, 0.96929642353529832, 0.96807527307938057, 0.96790100377822574, 0.96756038895071916, 0.96779392677891685, 0.96860996283579015, 0.96868122490705222, 0.96863094681897643, 0.96826746102298666, 0.96830976850214401, 0.96794795491293717, 0.9679349230147638, 0.96763198128834538, 0.96787536840168065, 0.96749487483982188, 0.96749873011461707, 0.9678958748839529, 0.96749889894179897, 0.96771957384915441, 0.967077938220266, 0.96674715736980144, 0.96666295477245645, 0.96704449242952673]
distance = [0.8073924774074106, 0.86705284598442689, 0.86415311980935849, 0.88327069481180764, 0.91266463537030584, 0.91715706500060379, 0.91410247178771686, 0.92982063045066676, 0.94057139371960063, 0.92169123128270858, 0.92757522756143085, 0.92586561532478873, 0.92499398917407805, 0.92894737307317143, 0.92709420369976248, 0.9312386081899543, 0.9301704023526336, 0.9417942210349125, 0.94116835318025482, 0.94182604095506639, 0.94130989009280408, 0.93996544508127866, 0.94040122992846198, 0.949181476800112, 0.9485270194280716, 0.94803782410255422, 0.95237842004153672, 0.95272273961777376, 0.94873261265256814, 0.95083281943973463, 0.95068367129376163, 0.95105423228691488, 0.95380467873626318, 0.95254533106431671, 0.95724307507611373, 0.95555984558431428, 0.95533221825317916, 0.95410622442055448, 0.95533234158971747, 0.95519195279758962, 0.95539326908234123, 0.95448460584489037, 0.95635107297173005, 0.95612984434293868, 0.95776297267397958, 0.95730329246617774, 0.95968651574652863, 0.95909859471606962, 0.95865999499934806, 0.95912962010808511, 0.95989087300274956, 0.9599575988267024, 0.96063835447423362, 0.95957330287626874, 0.95907101738203815, 0.95807405820755487, 0.95922511252187981, 0.95919517510713503, 0.95812417664333493, 0.95568786675407547, 0.95558249470886503, 0.95475139193274328, 0.95576962773576246, 0.95819575542754176, 0.95851011477382053, 0.95820444324238285, 0.9583650698472489, 0.95850696581463701, 0.95730169912964858, 0.95649503347992437, 0.95791187276934031, 0.95779592952904946, 0.95805529354427166, 0.95878956430856499, 0.95876043300958447, 0.95815457057519671, 0.95849640739598052, 0.96001596621867813, 0.96079060273105887, 0.96145449826710006, 0.9614959604750396, 0.96139909104747701, 0.96175763276019244, 0.96106353699544123, 0.95987152090367966, 0.95885251106554004, 0.96175113199251461, 0.96208988562834252, 0.96168882190007865, 0.96162439130391886, 0.96182571899168734, 0.96248312949780268, 0.96216176821355681, 0.96189220492304073, 0.96218851612209555, 0.96019575353844488, 0.96033947929062058, 0.96051614791412054, 0.96049405973490798, 0.96038561416983104, 0.95985884221644557, 0.95821968212920328, 0.95848715142669794, 0.95860085695587127, 0.95865021326300659, 0.95845730404289731, 0.95904536359668779, 0.95904974719637581, 0.9594224438569231, 0.95939573689217195, 0.95956585330784527, 0.95916603323985483, 0.95940059602212213, 0.95930121068789997, 0.95917125027238281, 0.95936701666425228, 0.95956535988910596, 0.95961352068787242, 0.95952955325582923, 0.95956550126775009, 0.95995170669236585, 0.95999979197529905, 0.96063758658143517, 0.96050936260894759, 0.96054818385799268, 0.96071804578531006, 0.96084104147341931, 0.96152610869865973, 0.96526725047621631, 0.96620221213818025, 0.96636190708280678, 0.96606758982658347, 0.96670226304336393, 0.9659522518637893, 0.96691871600584078, 0.96713136706839808, 0.96693396582802404, 0.96686238645049127, 0.96667251377120711, 0.96659439880310727, 0.96709574582677293, 0.96659565354386046, 0.96651140318730311, 0.96673488483373915, 0.96647011268170357, 0.96637185432270434, 0.96610262173520045, 0.96558822248300902, 0.96572905227993378, 0.96558761463535014, 0.9656454150516256, 0.96571375423978745, 0.96558279376931877, 0.96700208119284525, 0.9672484441693141, 0.96687227508184248, 0.96742880312771118, 0.96768067986312301, 0.96768465860736463, 0.9671247807704948, 0.96695995465896767, 0.96671714884998994, 0.96638439094486972, 0.9665543109581034, 0.96635811735251664, 0.96674504414658424, 0.96680786958332376, 0.96681022897727187, 0.96688962295375303, 0.96684063016309385, 0.96672807135374117, 0.96671236942593808, 0.96670051726454598, 0.96688894130263492, 0.96675558397730099, 0.96685078550215064, 0.96713644043987446, 0.96707765887181873, 0.96685826229575833, 0.96677095332483964, 0.96627522091762263, 0.96645883697429125, 0.9663996128945247, 0.9665656265310314, 0.96666152318984122, 0.96612310693477466, 0.96618902288299791, 0.96563833003096955, 0.96576016843614387, 0.96530915565438724, 0.96534532873219026, 0.96520942063777304, 0.96454100426974509, 0.9647101680945358, 0.96530336629118785, 0.96523999977958908, 0.96484772410086883, 0.96499055643942655, 0.96475033877895178, 0.96469096926619557]

plt.plot([i*intervals for i in range(1,steps+1)], logistic_regression, label="logistic regression ranking")
plt.plot([i*intervals for i in range(1,steps+1)], distance, label="distance ranking")
plt.legend()
plt.savefig("c:\\users\hagai\\desktop\\figure_fre")

